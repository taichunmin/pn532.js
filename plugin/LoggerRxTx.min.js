!function(e,s){"object"==typeof exports&&"undefined"!=typeof module?module.exports=s():"function"==typeof define&&define.amd?define(s):(e="undefined"!=typeof globalThis?globalThis:e||self).Pn532LoggerRxTx=s()}(this,(function(){"use strict";return class{name="loggerRxTx";install(e,s){const{Packet:a,pn532:t,utils:i}=e,{short:n=!0}=s,r=a.fromHex("0000FF"),o=a.fromHex("00"),p=a.fromHex("0000FF00FF00"),d=e=>n?e.length<8?e.inspect:e.subarray(0,3).isEqual(r)&&e.subarray(-1).isEqual(o)?65535===e.getUint16(3)?e.subarray(9,-2).inspect:e.subarray(6,-2).inspect:e.inspect:e.inspect;t.addMiddleware("writePacket",(async(e,s)=>(i.logTime(`send = ${d(e.pack)}`),await s()))),t.addMiddleware("skipRespLogger",(async(e,s)=>{const{message:a,resp:t}=e;return i.logTime(`resp skipped, message = ${a}, resp = ${t.pack.inspect}`),await s()})),t.addMiddleware("readRespTimeout",(async(e,s)=>{const a=await s();return a.pack.isEqual(p)||i.logTime(`resp = ${d(a.pack)}`),a}))}}}));
